import * as React from 'react';
import * as ReactDOM from 'react-dom';
import { createStore as reduxCreateStore, combineReducers } from 'redux';
import { AnalyseGraph } from '../analyse/AnalyseGraph';
import { AnalysisResult } from "../analyse/AnalysisResult";
import { AnalyseRelatedState } from "../analyse/AnalyseState";
import { analyseReducer } from '../analyse/AnalyseReducer';

export const AnalyseGraphTest = (container: HTMLElement) => {

    const props = { "state": "ready", "analysis": [{"ply":1,"move":"d4","eval":17,"best":"e4","variation":"e4 e5 Nf3 Nc6 Bc4 Nf6 d3 Bc5 O-O d6 c3 Bb6 Nbd2 O-O"},{"ply":2,"move":"d6","eval":25,"best":"d5","variation":"d5 c4 e6 Nf3 Nf6 Nc3 c6 e3 Nbd7 Bd3 Be7 b3 b6 O-O"},{"ply":3,"move":"c4","eval":52,"best":"Nc3","variation":"Nc3 Nf6 e4 e6 Nf3 Be7 h3 O-O Bd3 c5 dxc5 dxc5 Qe2 Nc6"},{"ply":4,"move":"g6","eval":34,"best":"e5","variation":"e5 e3 Be7 Nc3 f5 dxe5 dxe5 Qxd8+ Bxd8 Nf3 Nc6 Be2 Nf6 b3"},{"ply":5,"move":"Nc3","eval":64,"best":"e4","variation":"e4 Bg7 Nf3 Nd7 Nc3 e5 Bg5 Ngf6 dxe5 dxe5 Qc2 c6 Be2 h6"},{"ply":6,"move":"Bg7","eval":53,"best":"Nd7","variation":"Nd7 e4 e5 Nf3 Bg7 Bg5 Ne7 dxe5 dxe5 Qd2 h6 Bh4 O-O Rd1"},{"ply":7,"move":"e4","eval":48,"best":"Nf3","variation":"Nf3 Nd7 e4 e5 Bg5 Ne7 dxe5 h6 Be3 Nxe5 Nxe5 Bxe5 Qd2 g5"},{"ply":8,"move":"Nd7","eval":42,"best":"e5","variation":"e5"},{"ply":9,"move":"g3","eval":59,"best":"Nf3","variation":"Nf3 e5"},{"ply":10,"move":"Ngf6","eval":19,"best":"c5","variation":"c5 Nge2"},{"ply":11,"move":"Bg2","eval":38,"best":"Nf3","variation":"Nf3 O-O Bg2 c5 b3 cxd4 Nxd4 Nc5 O-O a6 h3 Bd7 Be3 Rc8"},{"ply":12,"move":"O-O","eval":26,"best":"c5","variation":"c5 d5 a6 Nge2 Ne5 b3 Bg4 h3 Bf3 O-O Nfd7 Bf4 O-O Rc1"},{"ply":13,"move":"Nge2","eval":28},{"ply":14,"move":"e5","eval":42,"best":"c5","variation":"c5 b3"},{"ply":15,"move":"d5","eval":47},{"ply":16,"move":"a5","eval":46,"best":"Nh5","variation":"Nh5 O-O a5 g4 Nf4 Nxf4 exf4 Bxf4 g5 Bg3 Ne5 h3 Nxc4 Qe2"},{"ply":17,"move":"a4","eval":45,"best":"Na4","variation":"Na4 Ne8 h4 f5 h5 gxh5 exf5 Ndf6 Qc2 Qd7 Bh3 Ng4 f3 Qxf5","judgment":{"name":"Inaccuracy","comment":"Mistake. Best mowe was Na4","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":18,"move":"Nc5","eval":-7},{"ply":19,"move":"O-O","eval":-7,"best":"Bg5","variation":"Bg5 h6"},{"ply":20,"move":"Nfd7","eval":-14},{"ply":21,"move":"f4","eval":2,"best":"Be3","variation":"Be3 f5 exf5 gxf5 f4 Qe7 fxe5 Nxe5 Bxc5 dxc5 d6 cxd6 Nf4 Ng4","judgment":{"name":"Inaccuracy","comment":"Mistake. Best mowe was Be3","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":22,"move":"Qe7","eval":-65,"best":"exf4","variation":"exf4 gxf4 Nb6 Be3 Nxc4 Bxc5 dxc5 Qd3 Nd6 Rac1 b6 e5 Nf5 Nb5","judgment":{"name":"Mistake","comment":"Mistake. Best mowe was exf4","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":23,"move":"f5","eval":82},{"ply":24,"move":"Nb6","eval":80,"best":"Na6","variation":"Na6 Be3 Ndc5 b3 Bd7 Rb1 b6 Rb2 Bf6 h4 Nb4 Nb5 gxf5 exf5"},{"ply":25,"move":"b3","eval":116},{"ply":26,"move":"gxf5","eval":115,"best":"Nbd7","variation":"Nbd7 Be3 b6 Ra2 h6 h3 Na6 Nb5 Nf6 Nec3 Qd8 Raf2 Bd7 Na3"},{"ply":27,"move":"exf5","eval":150},{"ply":28,"move":"e4","eval":142,"best":"Nbd7","variation":"Nbd7 Nb5 Na6 Be3 b6 Nec3 Ndc5 Rb1 f6 Ne4 Nxe4 Bxe4 Nb4 Nc3"},{"ply":29,"move":"g4","eval":147,"best":"Be3","variation":"Be3 Nbd7 g4 b6 h3 Bb7 Rb1 h6 Nb5 Ne5 Nf4 c6 dxc6 Bxc6"},{"ply":30,"move":"h6","eval":145,"best":"Qh4","variation":"Qh4 Be3"},{"ply":31,"move":"Ra2","eval":142,"best":"Be3","variation":"Be3"},{"ply":32,"move":"Bd7","eval":133,"best":"Nbd7","variation":"Nbd7"},{"ply":33,"move":"Qc2","eval":181,"best":"Be3","variation":"Be3 Qh4","judgment":{"name":"Inaccuracy","comment":"Mistake. Best mowe was Be3","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":34,"move":"Rae8","eval":124,"best":"e3","variation":"e3 Ba3 Bc8 Bxc5 dxc5 Ne4 Nd7 Qd3 Nf6 Qxe3 Nxe4 Qxe4 Qxe4 Bxe4"},{"ply":35,"move":"Be3","eval":147},{"ply":36,"move":"Qh4","eval":135,"best":"Bc8","variation":"Bc8 h3 Nbd7 Qd1 Qd8 Rd2 b6 Qc2 Nd3 Nxe4 Nb4 Qb1 Nf6 Nxf6+","judgment":{"name":"Inaccuracy","comment":"Mistake. Best mowe was Bc8","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":37,"move":"Bxc5","eval":190},{"ply":38,"move":"dxc5","eval":189},{"ply":39,"move":"h3","eval":201,"best":"Nxe4","variation":"Nxe4","judgment":{"name":"Mistake","comment":"Mistake. Best mowe was Nxe4","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":40,"move":"e3","eval":0,"best":"h5","variation":"h5 gxh5 Re5 Rf4 Qe1+ Rf1 Qh4","judgment":{"name":"Inaccuracy","comment":"Mistake. Best mowe was h5","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":41,"move":"Ne4","eval":94},{"ply":42,"move":"h5","eval":85},{"ply":43,"move":"Nxc5","eval":110,"best":"g5","variation":"g5 Bh8 Qd3 c6 Qb1 Rxe4 Qxe4 Qxg5 h4 Qh6 dxc6 Bxc6 Qf4 Kh7","judgment":{"name":"Mistake","comment":"Mistake. Best mowe was g5","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":44,"move":"hxg4","eval":0},{"ply":45,"move":"hxg4","eval":42,"best":"Rf4","variation":"Rf4","judgment":{"name":"Inaccuracy","comment":"Mistake. Best mowe was Rf4","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":46,"move":"Be5","eval":-18},{"ply":47,"move":"Rf3","eval":-55},{"ply":48,"move":"Bh2+","eval":-64},{"ply":49,"move":"Kf1","eval":-28},{"ply":50,"move":"Qxg4","eval":-50},{"ply":51,"move":"Nxd7","eval":-58,"best":"Qc3","variation":"Qc3 Re5 Qd4 Bxf5 Rxe3 Qxd4 Nxd4 Rxe3 Nxf5 Rc3 Be4 Rc1+ Kg2 Bg1"},{"ply":52,"move":"Nxd7","eval":-73},{"ply":53,"move":"Rh3","eval":-63},{"ply":54,"move":"Be5","eval":-70,"best":"Bd6","variation":"Bd6"},{"ply":55,"move":"c5","eval":-31,"best":"Qe4","variation":"Qe4 Qxe4","judgment":{"name":"Mistake","comment":"Mistake. Best mowe was Qe4","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":56,"move":"f6","eval":-178,"best":"Nf6","variation":"Nf6","judgment":{"name":"Mistake","comment":"Mistake. Best mowe was Nf6","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":57,"move":"c6","eval":46,"best":"Rh6","variation":"Rh6"},{"ply":58,"move":"bxc6","eval":15},{"ply":59,"move":"dxc6","eval":33,"best":"Rh6","variation":"Rh6"},{"ply":60,"move":"Nb6","eval":-9},{"ply":61,"move":"Nc3","eval":-13,"best":"Rh6","variation":"Rh6 Qb4 Qe4 Qxe4 Bxe4 Kg7 Rh3 Rh8 Rxe3 Nc8 Rd2 Nd6 Bg2 Nxf5","judgment":{"name":"Blunder","comment":"Blunder. Best mowe was Rh6","glyph":{"name":"Blunder","symbol":"??"}}},{"ply":62,"move":"Rd8","eval":-543,"best":"Bxc3","variation":"Bxc3","judgment":{"name":"Blunder","comment":"Blunder. Best mowe was Bxc3","glyph":{"name":"Blunder","symbol":"??"}}},{"ply":63,"move":"Rxe3","eval":-13},{"ply":64,"move":"Rd1+","eval":-28,"best":"Kf7","variation":"Kf7","judgment":{"name":"Blunder","comment":"Blunder. Best mowe was Kf7","glyph":{"name":"Blunder","symbol":"??"}}},{"ply":65,"move":"Qxd1","eval":703},{"ply":66,"move":"Qxf5+","eval":687,"best":"Qxd1+","variation":"Qxd1+ Nxd1 Rd8 Nf2 Rd4 Re4 Nd5 Rg4+ Kf7 Bxd5+ Rxd5 Ne4 Bd4 Ke2","judgment":{"name":"Blunder","comment":"Blunder. Best mowe was Qxd1+","glyph":{"name":"Blunder","symbol":"??"}}},{"ply":67,"move":"Rf3","eval":1225,"best":"Rf2","variation":"Rf2 Qe6 Bh3 f5 Qh5 Qf7 Qxf7+ Kxf7 Rxe5 Kg7 Bxf5 Rf6 Be4 Rxf2+","judgment":{"name":"Mistake","comment":"Mistake. Best mowe was Rf2","glyph":{"name":"Mistake","symbol":"?"}}},{"ply":68,"move":"Qe6","eval":894,"best":"Qg5","variation":"Qg5 Bh3"},{"ply":69,"move":"Nb5","eval":907},{"ply":70,"move":"Nd5","eval":810,"best":"Kf7","variation":"Kf7 Rh3"},{"ply":71,"move":"Rg3+","mate":11}]  };
    const result = new AnalysisResult(props);
    const preloadedState: AnalyseRelatedState = {
        analysis: {
            status: result.state,
            evals: result.analysis
        }
    }

    const store = reduxCreateStore(
        combineReducers<AnalyseRelatedState>({
            analysis: analyseReducer
        }), preloadedState);

    
    ReactDOM.render(React.createElement(AnalyseGraph, { id: 0, store: store }), container, () => { });
};